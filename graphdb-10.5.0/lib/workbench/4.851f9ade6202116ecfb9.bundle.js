(window.webpackJsonp=window.webpackJsonp||[]).push([[4,36,56,57,58,59,60,61,62,63,64,139,142],{116:function(e,t,a){"use strict";a.r(t),a.d(t,"FileDescriptorsChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e,t){super(e,!1,!1,t)}chartSetup(e){const t={yAxis:{axisLabel:{formatter:e=>this.formatNumber(e)},min:0},tooltip:{valueFormatter:e=>this.formatNumber(e)}};_.merge(e,t)}createDataHolder(){return[{name:this.translateService.instant("resource.system.file_descriptors.open"),type:"line",areaStyle:{opacity:r.ChartData.AREA_BAR_OPACITY},showSymbol:!1,smooth:!0,color:r.ChartData.COLORS[1],data:[]}]}translateLabels(){const[e]=this.dataHolder;e.name=this.translateService.instant("resource.system.file_descriptors.open"),this.configureSubtitle()}addNewData(e,t,a){this.latestData={maxFileDescriptors:a.maxFileDescriptors,openFileDescriptors:a.openFileDescriptors},this.configureSubtitle(),a.openFileDescriptors&&e[0].data.push({value:[t,a.openFileDescriptors]})}configureSubtitle(){let e;e=this.latestData.openFileDescriptors?[{label:this.translateService.instant("resource.system.file_descriptors.max"),value:this.formatNumber(this.latestData.maxFileDescriptors)}]:[{label:this.translateService.instant("resource.system.file_descriptors.only_unix")}],this.setSubTitle(e)}updateRange(e){super.updateRange(e,2)}}},117:function(e,t,a){"use strict";a.r(t),a.d(t,"NonHeapMemoryChart",(function(){return s}));var r=a(73);class s extends r.HeapMemoryChart{constructor(e){super(e,!1,!1)}parseData(e){return e.nonHeapMemoryUsage}}},118:function(e,t,a){"use strict";a.r(t),a.d(t,"CpuLoadChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!1,!1)}chartSetup(e){const t={yAxis:{axisLabel:{formatter:e=>e+"%"},min:0,max:function(e){return Math.round(e.max>50?100:2*e.max)}},tooltip:{valueFormatter:function(e){return e+"%"}}};_.merge(e,t)}createDataHolder(){return[{name:this.translateService.instant("resource.system.cpu_load.label"),type:"line",smoothMonotone:"x",showSymbol:!1,smooth:!0,data:[]}]}translateLabels(){const[e]=this.dataHolder;e.name=this.translateService.instant("resource.system.cpu_load.label")}addNewData(e,t,a){e[0].data.push({value:[t,this.formatValue(a.cpuLoad)]})}formatValue(e){return+parseFloat(e).toFixed(4)}updateRange(e){}}},119:function(e,t,a){"use strict";a.r(t),a.d(t,"DiskStorageChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!0,!0)}chartSetup(e){const t={height:250,tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:null},valueFormatter:function(e){return(100*e).toFixed(2)+"%"}},xAxis:{type:"value",min:0,max:1,splitNumber:2,axisLabel:{formatter:function(e){return(100*e).toFixed(2)+"%"}}},yAxis:{type:"category",data:[this.translateService.instant("resource.storage.logs"),this.translateService.instant("resource.storage.work"),this.translateService.instant("resource.storage.data")]},legend:{itemStyle:{opacity:1}}};_.merge(e,t)}createDataHolder(){return[this.createDataHolderForItem("resource.storage.used",r.ChartData.COLORS[1]),this.createDataHolderForItem("resource.storage.free",r.ChartData.COLORS[0])]}createDataHolderForItem(e,t){return{name:this.translateService.instant(e),type:"bar",stack:!0,showSymbol:!1,smooth:!0,barCategoryGap:"10%",color:t,itemStyle:{opacity:r.ChartData.AREA_BAR_OPACITY},label:{show:!0,color:"black",opacity:1,formatter:function({value:e}){return(100*e).toFixed(2)+"%"}},emphasis:{itemStyle:{color:t,opacity:1},label:{color:"white"}},data:[]}}translateLabels(){const[e,t]=this.dataHolder;e.name=this.translateService.instant("resource.storage.used"),t.name=this.translateService.instant("resource.storage.free"),this.chartSetup(this.chartOptions),this.configureSubtitle()}addNewData(e,t,a,r){const s=a.storageMemory,[o,i]=e;this.latestData={data:{used:s.dataDirUsed,free:s.dataDirFree},work:{used:s.workDirUsed,free:s.workDirFree},logs:{used:s.logsDirUsed,free:s.logsDirFree}},this.configureSubtitle();const n=s.dataDirUsed+s.dataDirFree,l=s.workDirUsed+s.workDirFree,c=s.logsDirUsed+s.logsDirFree,u=s.dataDirUsed/n,h=s.workDirUsed/l,d=s.logsDirUsed/c,m=s.dataDirFree/n,p=s.workDirFree/l,f=s.logsDirFree/c;o.data.push(d,h,u),i.data.push(f,p,m)}configureSubtitle(){const e=[{label:this.translateService.instant("resource.storage.subtitle.data"),value:[s.formatBytesValue(this.latestData.data.used,null,this.selectedSeries),s.formatBytesValue(this.latestData.data.free,null,this.selectedSeries)]},{label:this.translateService.instant("resource.storage.subtitle.work"),value:[s.formatBytesValue(this.latestData.work.used,null,this.selectedSeries),s.formatBytesValue(this.latestData.work.free,null,this.selectedSeries)]},{label:this.translateService.instant("resource.storage.subtitle.logs"),value:[s.formatBytesValue(this.latestData.logs.used,null,this.selectedSeries),s.formatBytesValue(this.latestData.logs.free,null,this.selectedSeries)]}];this.setSubTitle(e)}}},120:function(e,t,a){"use strict";a.r(t),a.d(t,"QueriesChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!1,!1)}createDataHolder(){return[{name:this.translateService.instant("resource.queries.running"),type:"line",showSymbol:!1,smooth:!0,data:[]}]}translateLabels(){const[e]=this.dataHolder;e.name=this.translateService.instant("resource.queries.running"),this.configureSubtitle()}addNewData(e,t,a){const{activeQueryData:r,performanceData:s}=a;this.latestData={slowQueries:s.queries.slow,suboptimal:s.queries.suboptimal,activeQueryData:r,performanceData:s},e[0].data.push({value:[t,r.length]}),this.configureSubtitle()}updateRange(e,t){const[a,s]=r.ChartData.getIntegerRangeForValues(e,this.selectedSeries);this.chartOptions.yAxis.max=a,this.chartOptions.yAxis.minInterval=s}configureSubtitle(){const e=[{label:this.translateService.instant("resource.queries.slow"),value:this.latestData.slowQueries},{label:this.translateService.instant("resource.queries.suboptimal"),value:this.latestData.suboptimal}];this.setSubTitle(e)}}},121:function(e,t,a){"use strict";a.r(t),a.d(t,"GlobalCacheChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e,t){super(e,!1,!1,t)}chartSetup(e){const t={yAxis:{axisLabel:{formatter:e=>this.formatNumber(e)},minInterval:1},tooltip:{valueFormatter:e=>this.formatNumber(e)}};_.merge(e,t)}createDataHolder(){return[{name:this.translateService.instant("resources.global_cache.hits"),type:"line",showSymbol:!1,smooth:!0,data:[]},{name:this.translateService.instant("resources.global_cache.miss"),type:"line",showSymbol:!1,smooth:!0,data:[]}]}translateLabels(){const[e,t]=this.dataHolder;e.name=this.translateService.instant("resources.global_cache.hits"),t.name=this.translateService.instant("resources.global_cache.miss")}addNewData(e,t,a){const[r,s]=e;r.data.push({value:[t,a.cacheHit]}),s.data.push({value:[t,a.cacheMiss]})}}},122:function(e,t,a){"use strict";a.r(t),a.d(t,"ConnectionsChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!1,!1)}createDataHolder(){return[{name:this.translateService.instant("resource.connections.active"),type:"line",showSymbol:!1,smooth:!0,data:[]},{name:this.translateService.instant("resource.connections.open"),type:"line",showSymbol:!1,smooth:!0,data:[]}]}translateLabels(){const[e,t]=this.dataHolder;e.name=this.translateService.instant("resource.connections.active"),t.name=this.translateService.instant("resource.connections.open")}addNewData(e,t,a){const[r,s]=e,{activeTransactions:o,openConnections:i}=a.performanceData;r.data.push({value:[t,o]}),s.data.push({value:[t,i]})}updateRange(e,t){const[a,s]=r.ChartData.getIntegerRangeForValues(e,this.selectedSeries);this.chartOptions.yAxis.max=a,this.chartOptions.yAxis.minInterval=s}}},123:function(e,t,a){"use strict";a.r(t),a.d(t,"ClusterHealthChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!0,!1),this.nodesCount=0}createDataHolder(){const[e,t,a,r]=s.COLORS;return[{name:this.translateService.instant("resources.cluster_health.in_sync"),type:"line",stack:"nodes",showSymbol:!1,step:"middle",areaStyle:{},lineStyle:{width:0},color:e,data:[]},{name:this.translateService.instant("resources.cluster_health.syncing"),type:"line",stack:"nodes",showSymbol:!1,step:"middle",areaStyle:{},lineStyle:{width:0},color:a,data:[]},{name:this.translateService.instant("resources.cluster_health.out_sync"),type:"line",stack:"nodes",showSymbol:!1,step:"middle",areaStyle:{},lineStyle:{width:0},color:t,data:[]},{name:this.translateService.instant("resources.cluster_health.disconnected"),type:"line",stack:"nodes",showSymbol:!1,step:"middle",areaStyle:{},lineStyle:{width:0},color:r,data:[]}]}addNewData(e,t,a){const r=a.nodesStats;this.nodesCount=r.nodesInCluster;const[s,o,i,n]=e;this.latestData={nodesInSync:r.nodesInCluster,nodesOutOfSync:r.nodesOutOfSync,nodesDisconnected:r.nodesDisconnected,nodesSyncing:r.nodesSyncing,term:a.term,failureRecoveriesCount:a.failureRecoveriesCount,failedTransactionsCount:a.failedTransactionsCount},s.data.push({value:[t,r.nodesInSync]}),i.data.push({value:[t,r.nodesOutOfSync]}),n.data.push({value:[t,r.nodesDisconnected]}),o.data.push({value:[t,r.nodesSyncing]}),this.configureSubtitle()}translateLabels(){const[e,t,a,r]=this.dataHolder;e.name=this.translateService.instant("resources.cluster_health.in_sync"),t.name=this.translateService.instant("resources.cluster_health.syncing"),a.name=this.translateService.instant("resources.cluster_health.out_sync"),r.name=this.translateService.instant("resources.cluster_health.disconnected"),this.configureSubtitle()}updateRange(e,t){this.chartOptions.yAxis.max=this.nodesCount,this.chartOptions.yAxis.splitNumber=this.nodesCount}configureSubtitle(){const e=[{label:this.translateService.instant("resource.cluster_health.leader_elections"),value:this.latestData.term},{label:this.translateService.instant("resource.cluster_health.recoveries"),value:this.latestData.failureRecoveriesCount},{label:this.translateService.instant("resource.cluster_health.failed_transactions"),value:this.latestData.failedTransactionsCount}];this.setSubTitle(e)}}},124:function(e,t,a){"use strict";a.r(t),a.d(t,"EpoolChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!1,!1)}chartSetup(e){const t={grid:{containLabel:!0,left:40},yAxis:[{name:this.translateService.instant("resource.epool.reads"),nameLocation:"middle",type:"value",nameGap:40},{name:this.translateService.instant("resource.epool.writes"),nameLocation:"middle",type:"value",nameGap:40}]};_.merge(e,t)}createDataHolder(){return[{name:this.translateService.instant("resource.epool.reads"),type:"line",showSymbol:!1,smooth:!0,yAxisIndex:0,data:[]},{name:this.translateService.instant("resource.epool.writes"),type:"line",showSymbol:!1,smooth:!0,yAxisIndex:1,data:[]}]}translateLabels(){const[e,t]=this.dataHolder;e.name=this.translateService.instant("resource.epool.reads"),t.name=this.translateService.instant("resource.epool.writes"),this.chartSetup(this.chartOptions)}addNewData(e,t,a,r){const s=a.performanceData,[o,i]=e;let n=0,l=0;const c=s.entityPool.epoolReads,u=s.entityPool.epoolWrites;r||(n=c-this.lastestData.reads,l=u-this.lastestData.writes),this.lastestData={reads:c,writes:u},o.data.push({value:[t,n]}),i.data.push({value:[t,l]})}updateRange(e){e.forEach((e,t)=>{const[a,s]=r.ChartData.getIntegerRangeForValues(e,this.selectedSeries);this.chartOptions.yAxis[t].max=a,this.chartOptions.yAxis[t].minInterval=s})}}},56:function(e,t,a){"use strict";a.r(t),a.d(t,"ChartData",(function(){return s}));var r=a(310);class s{static get DEFAULT_MULTIPLIER(){return 1.2}static get MAXIMUM_DIVISIONS(){return 10}static get COLORS(){return[s.cssVar("--secondary-color"),s.cssVar("--primary-color"),s.cssVar("--tertiary-color"),s.cssVar("--gray-color")]}static get AREA_BAR_OPACITY(){return.5}static cssVar(e){return getComputedStyle(document.documentElement).getPropertyValue(e)}constructor(e,t,a,r){this.filter=r,this.disableRangeUpdate=t,this.disableOldDataRemoval=a,this.translateService=e,this.refreshHandlers=[],this.initialChartSetup()}registerRefreshHandler(e){this.refreshHandlers.push(e)}unregisterRefreshHandler(e){const t=this.refreshHandlers.indexOf(e);t>-1&&this.refreshHandlers.splice(t,1)}initialChartSetup(e=!0){this.range=150,this.chartOptions=this.getDefaultChartOptions(this.translateService),e&&(this.dataHolder=this.createDataHolder(),this.chartOptions.series=this.dataHolder,this.firstLoad=!0),this.chartSetup(this.chartOptions)}refresh(e=!1){e||(this.chartSetup(this.chartOptions),this.updateRange(this.dataHolder)),this.refreshHandlers.forEach(e=>e(this.chartOptions))}setSubTitle(e,t=0){this.chartOptions.title.show=!0;let a="";e.forEach((r,s)=>{if(Array.isArray(r.value)&&!r.value.length)return;const o=Array.isArray(r.value)?r.value.join("/"):r.value;a+=`{a|${r.label}}`,void 0!==o&&(a+=`{b|${o}}`),s+1<e.length&&(a+=t>0&&(s+1)%t==0?"\n":"{a| · }")}),this.chartOptions.title.text=a}chartSetup(e){}createDataHolder(){throw new Error("Must implement data holder creation")}addData(e,t){this.removeOldData(this.dataHolder,this.range),this.addNewData(this.dataHolder,e,t,this.isFirstLoad()),this.hasSelectedSeries()&&(this.updateRange(this.dataHolder),this.firstLoad&&(this.firstLoad=!1),this.refresh(!0))}hasSelectedSeries(){return!this.selectedSeries||Object.values(this.selectedSeries).some(e=>!0===e)}removeOldData(e,t){this.disableOldDataRemoval||e[0].data.length>t&&e.forEach(e=>e.data.shift())}addNewData(e,t,a,r){}setSelectedSeries(e){this.selectedSeries=e}updateRange(e,t){if(this.disableRangeUpdate)return;const[a]=s.calculateMaxChartValueAndDivisions(e,t,this.selectedSeries);this.chartOptions.yAxis.max=a}isFirstLoad(){return this.firstLoad}getDefaultChartOptions(){return{title:{show:!1,text:"",left:"center",textStyle:{overflow:"breakAll",rich:{a:{fontWeight:400,fontSize:14},b:{color:s.cssVar("--secondary-color"),fontWeight:400,fontSize:14}}}},animation:!1,color:s.COLORS,legend:{right:"15%",top:"6%",textStyle:{overflow:"truncate"},icon:"circle"},tooltip:{trigger:"axis",axisPointer:{animation:!1,label:{formatter:function(e){return r.b.format(e.value,"{HH}:{mm}:{ss}",!1)}}}},grid:{containLabel:!0,left:40},xAxis:{type:"time",splitLine:{show:!0},axisLabel:{hideOverlap:!0,padding:8,formatter:{hour:"{bold|{HH}:{mm}}",minute:"{bold|{HH}:{mm}}",second:"{HH}:{mm}:{ss}"},color:s.cssVar("--gray-color-dark"),rich:{bold:{fontWeight:500}}}},yAxis:{type:"value",splitLine:{show:!0},axisLabel:{color:s.cssVar("--gray-color-dark")},axisTick:{lineStyle:{type:"solid"}}},textStyle:{fontFamily:s.cssVar("--main-font"),fontWeight:400}}}static getMaxValueFromDataHolder(e,t){const a=e.filter(e=>!t||angular.isUndefined(t[e.name])||!0===t[e.name]).map(e=>s.getMaxValueForDataSeries(e));return Math.max(1,...a)}static getMaxValueForDataSeries(e){return Math.max(...e.data.map(e=>e.value[1]))}static calculateMaxChartValueAndDivisions(e,t,a){let r;r=Array.isArray(e)?s.getMaxValueFromDataHolder(e,a):s.getMaxValueForDataSeries(e);const o=Math.ceil(r*(t||s.DEFAULT_MULTIPLIER))||1;return[o,Math.ceil(o/s.MAXIMUM_DIVISIONS)]}static getIntegerRangeForValues(e,t,a){const[r,o]=s.calculateMaxChartValueAndDivisions(e,t,a);return[r,o]}static formatBytesValue(e,t,a){let r=e;t&&(r=s.getMaxValueFromDataHolder(t,a));const o=Math.floor(Math.log(r)/Math.log(1024));return`${(parseFloat(e)/Math.pow(1024,o)).toFixed(2)} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`}formatNumber(e){if(!angular.isUndefined(e)&&this.filter)return this.filter("currency")(e,"",0)}}},58:function(e,t){angular.module("graphdb.framework.rest.cluster.service",[]).factory("ClusterRestService",a),a.$inject=["$http"];function a(e){return{getClusterConfig:function(){return e.get("rest/cluster/config")},createCluster:function(t){return e.post("rest/cluster/config",t)},updateCluster:function(t){t.nodes&&delete t.nodes;return e.patch("rest/cluster/config",t)},deleteCluster:function(t){const a=$.param({force:t});return e.delete("rest/cluster/config?"+a)},addNodesToCluster:function(t){return e.post("rest/cluster/config/node",{nodes:t})},replaceNodesInCluster:function(t){return e.patch("rest/cluster/config/node",t)},removeNodesFromCluster:function(t){return e.delete("rest/cluster/config/node",{data:{nodes:t},headers:{"Content-Type":"application/json"}})},getClusterStatus:function(){return e.get("rest/cluster/group/status")},getNodeStatus:function(){return e.get("rest/cluster/node/status")}}}},73:function(e,t,a){"use strict";a.r(t),a.d(t,"HeapMemoryChart",(function(){return s}));var r=a(56);class s extends r.ChartData{constructor(e){super(e,!1,!1)}chartSetup(e){const t={yAxis:{axisLabel:{formatter:e=>this.hasSelectedSeries()?s.formatBytesValue(e,this.dataHolder,this.selectedSeries):s.formatBytesValue(e,this.dataHolder)},min:0},tooltip:{valueFormatter:e=>s.formatBytesValue(e,null,this.selectedSeries)}};_.merge(e,t)}createDataHolder(){return[{name:this.translateService.instant("resource.memory.committed"),type:"line",showSymbol:!1,smooth:!0,data:[]},{name:this.translateService.instant("resource.memory.used"),type:"line",areaStyle:{opacity:r.ChartData.AREA_BAR_OPACITY},showSymbol:!1,smooth:!0,data:[]}]}translateLabels(){const[e,t]=this.dataHolder;e.name=this.translateService.instant("resource.memory.committed"),t.name=this.translateService.instant("resource.memory.used"),this.configureSubtitle()}addNewData(e,t,a){const[r,s]=e,o=this.parseData(a);this.latestData={committed:o.committed,used:o.used,max:o.max},r.data.push({value:[t,o.committed]}),s.data.push({value:[t,o.used]}),this.configureSubtitle()}configureSubtitle(){if(this.latestData.max>0){const e=[{label:this.translateService.instant("resource.memory.heap.max"),value:s.formatBytesValue(this.latestData.max,null,this.selectedSeries)}];this.setSubTitle(e)}}parseData(e){return e.heapMemoryUsage}updateRange(e,t,a){super.updateRange(e,t,a)}}},79:function(e,t,a){"use strict";a.r(t);a(7),a(22),a(26),a(58);var r=a(116),s=a(73),o=a(117),i=a(118),n=a(119),l=a(120),c=a(121),u=a(122),h=a(123),d=a(124);angular.module("graphdb.framework.jmx.resources.controllers",["ui.bootstrap","graphdb.framework.core.services.repositories","graphdb.framework.rest.monitoring.service","graphdb.framework.rest.cluster.service"]).controller("ResourcesCtrl",["$scope","$timeout","MonitoringRestService","$translate","$repositories","$q","ClusterRestService","$filter",function(e,t,a,m,p,f,S,g){e.AVAILABLE_TABS=Object.freeze({RESOURCE_MONITOR:"resource",PERFORMANCE_MONITOR:"performance",CLUSTER_HEALTH:"cluster"});const y=window.location.hash.slice(1),v=Object.keys(e.AVAILABLE_TABS).find(t=>e.AVAILABLE_TABS[t]===y);e.activeTab=e.AVAILABLE_TABS[v]||e.AVAILABLE_TABS.RESOURCE_MONITOR,e.resourceMonitorData={error:{hasError:!1,message:"",retries:0},charts:{cpuLoad:new i.CpuLoadChart(m),fileDescriptors:new r.FileDescriptorsChart(m,g),heapMemory:new s.HeapMemoryChart(m),offHeapMemory:new o.NonHeapMemoryChart(m),diskStorage:new n.DiskStorageChart(m)}},e.performanceMonitorData={error:{hasError:!1,message:"",retries:0},charts:{connectionsChart:new u.ConnectionsChart(m),epoolChart:new d.EpoolChart(m),queriesChart:new l.QueriesChart(m)}},e.structuresMonitorData={error:{hasError:!1,message:"",retries:0},charts:{globalCacheChart:new c.GlobalCacheChart(m,g)}},e.clusterHealthData={error:{hasError:!1,message:"",retries:0},charts:{clusterHealthChart:new h.ClusterHealthChart(m)}},e.hasCluster=!1;e.loader=!0,e.switchTab=t=>{e.activeTab=t,window.location.hash=t},e.getActiveRepository=function(){return p.getActiveRepository()};const D=function(e){return a.monitorQueryTransactionStatistics(e).then((function(e){return e.data}))},b=function(e){return a.monitorQuery(e).then((function(e){return e.data}))},C=function(){return a.monitorCluster()},w=e=>{if(e.chartsHolder.error.hasError){if(3===e.chartsHolder.error.retries)return e.poll&&t.cancel(e.poll),Promise.resolve();e.chartsHolder.error.retries++}return e.fetchFn().then((function(t){x(t,e)})).then(()=>{O(e)}).catch(t=>{A(e,t)}).finally(()=>{e.poll&&t.cancel(e.poll),e.poll=t(()=>w(e),2e3)})},x=(e,t,a)=>{const r=e.data;r&&H(r,t,a)},H=(e,t,a)=>{const r=new Date;a?a(r,e):Object.values(t.chartsHolder.charts).forEach(t=>{t.addData(r,e)})},A=(e,t)=>{e.chartsHolder.error.hasError=!!t,e.chartsHolder.error.hasError&&(e.chartsHolder.error.message=getError(t))},O=e=>{e.chartsHolder.error.hasError=!1,e.chartsHolder.error.message=""};e.monitors=[],e.monitors.push({chartsHolder:e.resourceMonitorData,error:{hasError:!1,message:"",retries:0},fetchFn:function(){return a.monitorResources()},poll:null}),e.monitors.push({chartsHolder:e.structuresMonitorData,error:{hasError:!1,message:"",retries:0},fetchFn:function(){const t=e.getActiveRepository();return t?a.monitorStructures(t):Promise.resolve({})},poll:null}),e.monitors.push({chartsHolder:e.performanceMonitorData,error:{hasError:!1,message:"",retries:0},fetchFn:function(){const t=e.getActiveRepository();return t?f.all([D(t),b(t)]).then(e=>{const[t,a]=e;return{data:{performanceData:t,activeQueryData:a}}}):Promise.resolve({})},poll:null}),S.getNodeStatus().then(()=>{e.hasCluster=!0;const t={chartsHolder:e.clusterHealthData,fetchFn:C,poll:null};e.monitors.push(t),w(t)}).catch(()=>{e.hasCluster=!1});let R=null;f.all(e.monitors.map(e=>w(e))).finally(()=>{e.loader&&(R&&t.cancel(R),R=t((function(){e.loader=!1}),500))}),e.$on("$destroy",(function(){R&&t.cancel(R);for(const a of e.monitors)a.poll&&t.cancel(a.poll)}))}])}}]);