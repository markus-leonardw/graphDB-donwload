(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{91:function(t,e,n){"use strict";n.r(e),n.d(e,"clusterColors",(function(){return o})),n.d(e,"createClusterSvgElement",(function(){return a})),n.d(e,"createClusterZone",(function(){return s})),n.d(e,"setCreateClusterZone",(function(){return c})),n.d(e,"updateClusterZoneLabels",(function(){return d})),n.d(e,"moveElement",(function(){return u})),n.d(e,"createNodes",(function(){return i})),n.d(e,"updateNodes",(function(){return l})),n.d(e,"createLinks",(function(){return S})),n.d(e,"updateLinks",(function(){return p})),n.d(e,"setLinkColor",(function(){return N})),n.d(e,"setLinkStyle",(function(){return h})),n.d(e,"positionNodesOnClusterZone",(function(){return y}));var r=n(77);const o={ontoOrange:"var(--primary-color)",ontoBlue:"var(--secondary-color)",ontoGreen:"var(--tertiary-color)",ontoGrey:"var(--gray-color)"};function a(t){return d3.select(t).append("svg")}function s(t){const e=t.append("g");return e.append("circle").classed("cluster-zone",!0).style("fill","transparent").style("stroke-width","2"),e}function c(t,e,n,r=!1){if(e.select(".cluster-zone").classed("no-cluster",!t).classed("has-access",r),t)e.selectAll("#no-cluster-zone").remove();else{const t=e.append("g").attr("id","no-cluster-zone");t.append("text").attr("id","no-cluster-label").text(n.no_cluster_configured).attr("y",-50).classed("h2",!0).style("text-anchor","middle"),r&&t.append("text").attr("id","create-cluster-label").classed("h3",!0).text(n.create_cluster_btn).style("text-anchor","middle"),t.append("text").attr("y",130).attr("class","icon-any repo").attr("fill",o.ontoOrange).style("text-anchor","middle").classed("settings-icon",!0).text("")}}function d(t,e,n){t||(e.select("#no-cluster-zone #no-cluster-label").text(n.no_cluster_configured),e.select("#no-cluster-zone #create-cluster-label").text(n.create_cluster_btn))}function u(t,e,n){t.attr("transform",()=>`translate(${e}, ${n})`)}function i(t,e,n){const r=t.enter().append("g").attr("id","node-group").classed("legend",n),o=r.merge(t).attr("id","node-group").classed("legend",n);return function(t,e){const n=Math.sqrt(3)/2,r=[[e+0,0],[e/2+0,e*n+0],[-e/2+0,e*n+0],[0-e,0],[-e/2+0,-e*n+0],[e/2+0,-e*n+0],[e+0,0],[e/2+0,e*n+0]];t.selectAll("path.area").data([r]).enter().append("path").attr("class","node member").attr("d",d3.line())}(r,e),t.exit().remove(),r.append("text").attr("class","icon-any node-icon"),function(t,e,n){const r=t.append("g");n?r.append("foreignObject").attr("y",e).attr("x",-e).attr("width",2*e).attr("height",10).attr("class","label-wrapper").append("xhtml:div").attr("class","id id-host"):(r.append("rect").attr("class","id-host-background").attr("rx",6),r.append("text").attr("y",e+15).attr("class","id id-host"),r.append("rect").attr("class","node-info-background").attr("rx",6),r.append("text").attr("y",e+45).attr("class","node-info-text"))}(r,e,n),o}function l(t){!function(t){t.select(".node-icon").classed("icon-any",(function(t){return!f(t)})).classed("fa-d3",f).text((function(t){return f(t)?function(t){if(_.isEmpty(t.recoveryStatus))return"";switch(t.recoveryStatus.state){case r.RecoveryState.SEARCHING_FOR_NODE:return"";case r.RecoveryState.WAITING_FOR_SNAPSHOT:return"";case r.RecoveryState.RECEIVING_SNAPSHOT:return"";case r.RecoveryState.APPLYING_SNAPSHOT:return"";case r.RecoveryState.BUILDING_SNAPSHOT:return"";case r.RecoveryState.SENDING_SNAPSHOT:return"";default:return""}}(t):function(t){if(t.nodeState===r.NodeState.LEADER)return"";if(t.nodeState===r.NodeState.FOLLOWER)return"";if(t.nodeState===r.NodeState.CANDIDATE)return"";if(t.nodeState===r.NodeState.NO_CONNECTION)return"";if(t.nodeState===r.NodeState.OUT_OF_SYNC)return"";if(t.nodeState===r.NodeState.READ_ONLY)return"";if(t.nodeState===r.NodeState.RESTRICTED)return"";return""}(t)}))}(t),function(t){t.select(".node.member").classed("leader",t=>t.nodeState===r.NodeState.LEADER).classed("follower",t=>t.nodeState===r.NodeState.FOLLOWER).classed("candidate",t=>t.nodeState===r.NodeState.CANDIDATE).classed("other",t=>t.nodeState!==r.NodeState.LEADER&&t.nodeState!==r.NodeState.FOLLOWER&&t.nodeState!==r.NodeState.CANDIDATE)}(t),function(t){t.select(".id.id-host").each((function(t){t.labelNode=this})).text((function(t){return t.hostname})),t.select(".id-host-background").attr("width",(function(t){return d3.select(t.labelNode).node().getBBox().width+10})).attr("height",(function(t){return d3.select(t.labelNode).node().getBBox().height+10})).attr("x",(function(t){return d3.select(t.labelNode).node().getBBox().x-5})).attr("y",(function(t){return d3.select(t.labelNode).node().getBBox().y-5}))}(t),function(t){t.select(".node-info-text").each((function(t){t.infoNode=this})).text((function(t){return t.recoveryStatus&&t.recoveryStatus.message})),t.select(".node-info-background").attr("width",(function(t){return d3.select(t.infoNode).node().getBBox().width+10})).attr("height",(function(t){return d3.select(t.infoNode).node().getBBox().height+10})).attr("x",(function(t){return d3.select(t.infoNode).node().getBBox().x-5})).attr("y",(function(t){return d3.select(t.infoNode).node().getBBox().y-5})).classed("hidden",(function(t){return _.isEmpty(t.recoveryStatus)}))}(t)}function f(t){return!_.isEmpty(t.recoveryStatus)}function S(t){t.enter().append("path").classed("link",!0),t.exit().remove()}function p(t,e){t.attr("stroke",N).style("stroke-dasharray",h).attr("d",t=>function(t,e){const n=e.find(e=>e.address===t.source),r=e.find(e=>e.address===t.target),o=r.x-n.x,a=r.y-n.y,s=Math.sqrt(o*o+a*a),c=o/s,d=a/s,u=n.x+55*c,i=n.y+55*d,l=r.x-55*c,f=r.y-55*d;return"M"+u+","+i+"L"+l+","+f}(t,e))}function N(t){return t.status===r.LinkState.IN_SYNC||t.status===r.LinkState.SYNCING?o.ontoGreen:t.status===r.LinkState.OUT_OF_SYNC?o.ontoGrey:"none"}function h(t){return t.status===r.LinkState.OUT_OF_SYNC||t.status===r.LinkState.SYNCING?"10 10":"none"}function y(t,e,n,r){t.attr("transform",(o,a)=>{const s=2*Math.PI*a/t.size(),c=e+Math.cos(s)*r,d=n+Math.sin(s)*r;return o.x=c,o.y=d,`translate(${c}, ${d})`})}}}]);